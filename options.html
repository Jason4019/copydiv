<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>常用词设置 - CopyDiv Extension</title>
  <link rel="stylesheet" href="styles/options.css">
</head>
<body>
  <div class="container">
    <h1>常用词设置</h1>

    <!-- 选项页标签 -->
    <div class="options-tabs">
      <button class="options-tab active" data-tab="words">常用词管理</button>
      <button class="options-tab" data-tab="settings">配置管理</button>
      <button class="options-tab" data-tab="help">帮助</button>
      <button class="options-tab" data-tab="about">关于</button>
    </div>

    <!-- 常用词管理 Tab -->
    <div id="tab-words" class="tab-panel active">
      <!-- 分类标签 -->
      <div class="category-header">
        <div id="categoryTabs" class="category-tabs">
          <!-- 动态渲染的分类标签 -->
        </div>
      </div>
      
      <!-- 添加常用词表单 -->
      <div class="add-word-section">
        <h2 data-i18n="options.add.title">添加常用词</h2>
        <div class="form-group">
          <textarea id="wordInput" placeholder="输入常用词（支持换行）..." maxlength="500" rows="3"></textarea>
          <button id="addBtn" class="btn-primary">添加</button>
        </div>
        <div id="inputError" class="error-message"></div>
      </div>

      <!-- 常用词列表 -->
      <div class="words-section">
        <h2 data-i18n="options.words.title">常用词列表</h2>
        <div id="wordsList" class="words-list">
          <!-- 动态渲染的常用词列表 -->
        </div>
        <div id="emptyState" class="empty-state" style="display: none;">
          <p>暂无常用词，请添加常用词</p>
        </div>
      </div>
    </div>

    <!-- 配置管理 Tab -->
    <div id="tab-settings" class="tab-panel">
      <h2 data-i18n="settings.title">配置管理</h2>
      <div class="settings-group">
        <div class="default-category-setting">
          <label for="defaultCategorySelect" data-i18n="settings.defaultCategory">popup 默认标签：</label>
          <select id="defaultCategorySelect"></select>
          <span class="hint" data-i18n="settings.defaultCategory.hint">打开弹窗时优先显示的分类</span>
        </div>
        <div class="language-setting">
          <label for="languageSelect" data-i18n="settings.language">语言：</label>
          <select id="languageSelect">
            <option value="zh-CN">中文</option>
            <option value="en-US">English</option>
          </select>
          <span class="hint" data-i18n="settings.language.hint">选择界面显示语言</span>
        </div>
      </div>
    </div>

    <!-- 帮助 Tab -->
    <div id="tab-help" class="tab-panel">
      <h2>使用帮助</h2>
      <div class="help-content">
        <section class="help-section">
          <h3>📖 快速开始</h3>
          <p>这是一个常用词管理扩展，可以帮助你快速复制常用的文本内容。</p>
          <ol>
            <li>在<strong>常用词管理</strong>页面添加你的常用词</li>
            <li>点击浏览器工具栏的扩展图标打开弹窗</li>
            <li>点击任意常用词按钮即可复制到剪贴板</li>
          </ol>
        </section>

        <section class="help-section">
          <h3>✨ 主要功能</h3>
          <div class="help-feature">
            <h4>1. 添加常用词</h4>
            <ul>
              <li>在文本框中输入常用词（支持多行换行）</li>
              <li>点击<strong>添加</strong>按钮或按 <kbd>Ctrl+Enter</kbd>（Mac: <kbd>Cmd+Enter</kbd>）</li>
              <li>每个常用词最多 500 个字符</li>
            </ul>
          </div>

          <div class="help-feature">
            <h4>2. 编辑常用词</h4>
            <ul>
              <li>点击常用词右侧的<strong>编辑</strong>按钮</li>
              <li>可以修改文本、分类和颜色</li>
              <li>按 <kbd>Ctrl+Enter</kbd> 保存，<kbd>Esc</kbd> 取消</li>
            </ul>
          </div>

          <div class="help-feature">
            <h4>3. 分类管理</h4>
            <ul>
              <li>在编辑时可以为常用词设置分类（如：工作、生活、默认等）</li>
              <li>顶部标签可以快速筛选不同分类的常用词</li>
              <li>支持自定义分类名称</li>
            </ul>
          </div>

          <div class="help-feature">
            <h4>4. 颜色标记</h4>
            <ul>
              <li>每个常用词可以设置不同的颜色</li>
              <li>在弹窗中，常用词按钮会显示对应的颜色</li>
              <li>方便快速识别和分类</li>
            </ul>
          </div>

          <div class="help-feature">
            <h4>5. 快速复制</h4>
            <ul>
              <li>点击弹窗中的常用词按钮即可复制</li>
              <li>复制成功后弹窗会自动关闭</li>
              <li>支持多行文本，换行符会被保留</li>
            </ul>
          </div>
        </section>

        <section class="help-section">
          <h3>⚙️ 配置选项</h3>
          <div class="help-feature">
            <h4>popup 默认标签</h4>
            <p>在<strong>配置管理</strong>页面可以设置弹窗打开时默认显示的分类。选择后，下次打开弹窗时会自动显示该分类下的常用词。</p>
          </div>
        </section>

        <section class="help-section">
          <h3>⌨️ 快捷键</h3>
          <ul class="help-shortcuts">
            <li><kbd>Ctrl+Enter</kbd> / <kbd>Cmd+Enter</kbd>：添加或保存常用词</li>
            <li><kbd>Esc</kbd>：取消编辑</li>
            <li><kbd>Enter</kbd>：在文本框中换行（多行输入）</li>
          </ul>
        </section>

        <section class="help-section">
          <h3>💡 使用技巧</h3>
          <ul>
            <li><strong>多行文本</strong>：在输入框中按 <kbd>Enter</kbd> 可以换行，适合保存地址、代码片段等多行内容</li>
            <li><strong>分类管理</strong>：建议为不同类型的常用词设置不同的分类，方便快速查找</li>
            <li><strong>颜色区分</strong>：使用不同颜色标记重要或不同类型的常用词</li>
            <li><strong>自动关闭</strong>：复制成功后弹窗会自动关闭，无需手动操作</li>
          </ul>
        </section>

        <section class="help-section">
          <h3>❓ 常见问题</h3>
          <div class="help-faq">
            <h4>Q: 为什么复制后弹窗会自动关闭？</h4>
            <p>A: 这是为了提升使用效率。复制成功后弹窗会自动关闭，你可以直接粘贴使用。如果复制失败，弹窗会保持打开并显示错误提示。</p>

            <h4>Q: 如何删除常用词？</h4>
            <p>A: 在常用词列表中，点击右侧的<strong>删除</strong>按钮，确认后即可删除。</p>

            <h4>Q: 数据会同步吗？</h4>
            <p>A: 是的，所有数据使用 Chrome 同步存储，会在你登录的 Chrome/Edge 账户间同步。</p>

            <h4>Q: 可以导入/导出常用词吗？</h4>
            <p>A: 当前版本暂不支持，未来版本可能会添加此功能。</p>
          </div>
        </section>
      </div>
    </div>

    <!-- 关于 Tab -->
    <div id="tab-about" class="tab-panel">
      <h2>关于</h2>
      <div class="about-content">
        <div class="about-header">
          <h3 id="appName">CopyDiv</h3>
          <p class="app-description" id="appDescription">快速复制常用词</p>
          <div class="version-info">
            <span class="version-label">版本：</span>
            <span class="version-value" id="appVersion">1.0.0</span>
          </div>
        </div>

        <section class="about-section">
          <h4>📦 项目信息</h4>
          <div class="info-item">
            <span class="info-label">扩展名称：</span>
            <span class="info-value" id="manifestName">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">版本号：</span>
            <span class="info-value" id="manifestVersion">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">Manifest 版本：</span>
            <span class="info-value" id="manifestVersionNumber">-</span>
          </div>
        </section>

        <section class="about-section">
          <h4>🔗 相关链接</h4>
          <div class="link-item">
            <a href="https://github.com/Jason4019/copydiv" target="_blank" rel="noopener noreferrer" class="github-link" id="githubLink">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="vertical-align: middle; margin-right: 6px;">
                <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
              </svg>
              GitHub 仓库
            </a>
          </div>
        </section>

        <section class="about-section">
          <h4>📝 许可证</h4>
          <p class="license-text">本项目采用 MIT 许可证开源。</p>
        </section>

        <section class="about-section">
          <h4>🙏 致谢</h4>
          <p class="acknowledgment-text">感谢使用 CopyDiv 扩展！如有问题或建议，欢迎在 GitHub 上提交 Issue。</p>
        </section>
      </div>
    </div>

    <!-- 编辑模态框 -->
    <div id="editModal" class="modal" style="display: none;">
      <div class="modal-content">
        <h3 data-i18n="options.edit.title">编辑常用词</h3>
        <textarea id="editInput" placeholder="输入常用词（支持换行）..." maxlength="500" rows="3"></textarea>
        <div class="modal-row">
          <div class="modal-field">
            <label for="editCategory" data-i18n="options.edit.category">分类</label>
            <input type="text" id="editCategory" placeholder="如：默认、工作、生活等">
          </div>
          <div class="modal-field">
            <label for="editColor" data-i18n="options.edit.color">颜色</label>
            <input type="color" id="editColor">
          </div>
        </div>
        <div id="editError" class="error-message"></div>
        <div class="modal-actions">
          <button id="saveEditBtn" class="btn-primary" data-i18n="save">保存</button>
          <button id="cancelEditBtn" class="btn-secondary" data-i18n="cancel">取消</button>
        </div>
      </div>
    </div>

    <!-- 消息提示 -->
    <div id="message" class="message"></div>
  </div>
  <script src="utils.js"></script>
  <script src="i18n.js"></script>
  <script src="options.js"></script>
</body>
</html>

